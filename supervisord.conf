[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
pidfile=/tmp/supervisord.pid

[program:backend]
# Use su-exec to drop privileges to the grabarr user
# This ensures the process runs with the correct UID/GID set in entrypoint.sh
command=su-exec grabarr python run.py
directory=/app/backend
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=PYTHONUNBUFFERED=1

[program:frontend]
# Use su-exec to drop privileges to the grabarr user
command=su-exec grabarr node server.js
directory=/app/frontend
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=HOSTNAME="0.0.0.0",PORT="3643"
