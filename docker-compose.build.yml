# Docker Compose file for building grabarr locally
# Usage: docker compose -f docker-compose.build.yml up --build

services:
  grabarr:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: grabarr
    ports:
      - "3643:3643"
    volumes:
      - ./config:/config
    environment:
      # User/Group ID - set thes e to match your host user (run 'id' to find values)
      - PUID=1000
      - PGID=1000
      # Optional: Set file permission mask (default: system default, common: 022, 002)
      # - UMASK=022
      # Database and config paths
      - GRABARR_DB_PATH=/config/grabarr.db
      - GRABARR_JWT_SECRET_PATH=/config/.jwt_secret
      - GRABARR_KEY_PATH=/config/.grabarr_key
      - GRABARR_RCLONE_AUTH_PATH=/config/.rclone_auth
      # Log level: DEBUG, INFO, WARNING, ERROR (default: INFO)
      # - GRABARR_LOG_LEVEL=INFO
      # Rclone API timeout in seconds - increase if SFTP connections are slow (default: 60)
      # - GRABARR_RCLONE_TIMEOUT=60
    restart: unless-stopped
